<div class="chat-header">
  <div class="left-header">
    <div class="header-title">
      <b>RoomName</b>
    </div>
  </div>
  <div class="right-header">
    <div class="header-button">
      <a href="#"><b>DELETE</b></a>
    </div>
  </div>
</div>

<div class="messages">
  <div class="message">
    <div class="upper-message">
      <div class="message-user">
        <b>UserName01</b>
      </div>
      <div class="message-date">
        2024/10/01(Tue) 10:43:30
      </div>
    </div>
    <div class="lower-message">
      <div class="message-content">
        ãŠã¯ã‚ˆã†
      </div>
    </div>
  </div>

  <div class="message">
    <div class="upper-message">
      <div class="message-user">
        <b>UserName02</b>
      </div>
      <div class="message-date">
        2024/10/04(Fri) 18:47:30
      </div>
    </div>
    <div class="lower-message">
      <div class="message-content">
        ã“ã‚“ã°ã‚“ã¯
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const messages = document.querySelectorAll('.message');  //å…¨ã¦ã® .message-content ã‚’å–å¾—

      messages.forEach(message => {
        const content = message.querySelector('.message-content').textContent;  //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é•·ã•ã«åŸºã¥ã„ã¦æ¨ªå¹…ã‚’è¨ˆç®—ï¼ˆé©å®œèª¿æ•´ï¼‰

        const minWidth = 300;  //æœ€å°å¹…
        const maxWidth = 800;  //æœ€å¤§å¹…
        const calculatedWidth = Math.min(Math.max(content.length * 10, minWidth), maxWidth);

        message.style.width = `${calculatedWidth}px`;  //æ¨ªå¹…ã‚’è¨­å®š
      });
    });
  </script>

</div>

<%= form_with model: [@room, @message], html: {class: "form", multipart: true}, local: true do |f|%>
  <div class="form-input">
    <%= f.text_field :content, class: 'form-message', placeholder: 'type a message' %>
    <label class="form-attachment">
      <span class="attachment-file">ğŸ“</span>
      <%= f.file_field :image, class: 'hidden' %>
    </label>
  </div>
  <%= f.submit 'SEND', class: 'form-submit' %>
<% end %>
